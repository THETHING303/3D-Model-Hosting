<script>
  const isIOS = /iPhone|iPad|iPod/i.test(navigator.userAgent);
  const arContainer = document.getElementById('ar-container');
  const modelViewer = document.getElementById('modelViewer');

  if (isIOS) {
    // iOS: Use AR Quick Look with USDZ
    const usdzUrl = "https://thething303.github.io/3D-Model-Hosting/Hilux-Rack-v1.usdz";
    modelViewer.setAttribute('src', usdzUrl);
    arContainer.innerHTML = `
      <a rel="ar" href="${usdzUrl}">
        <img src="https://developer.apple.com/arkit/images/quicklook/gallery-placeholder.png" alt="View in AR" width="200">
        <p>Tap to view in AR (iOS)</p>
      </a>
    `;
  } else {
    // Android: Use Scene Viewer with GLB
    const glbUrl = "https://thething303.github.io/3D-Model-Hosting/Hilux-Rack-v1.glb";
    const encodedGlbUrl = encodeURIComponent(glbUrl);

    const sceneViewerUrl = `intent://arvr.google.com/scene-viewer/1.0?file=${encodedGlbUrl}&mode=ar_preferred#Intent;scheme=https;package=com.google.ar.core;action=android.intent.action.VIEW;S.browser_fallback_url=${glbUrl};end;`;

    modelViewer.setAttribute('src', glbUrl);
    arContainer.innerHTML = `
      <a href="${sceneViewerUrl}">
        <img src="https://developer.apple.com/arkit/images/quicklook/gallery-placeholder.png" alt="View in AR" width="200">
        <p>Tap to view in AR (Android)</p>
      </a>
    `;
  }
</script>
